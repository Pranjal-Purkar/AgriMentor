<div class="space-y-6">

  <!-- Header -->
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-lg font-semibold text-gray-800">Admin Dashboard</h1>
      <p class="text-sm text-gray-500 mt-1">
        Platform Overview — Monitor and manage the E-Consultancy platform
      </p>
    </div>

    <button class="text-sm px-3 py-1 rounded-md border bg-white">
      Admin User
    </button>
  </div>

  <!-- Summary Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
    @for (card of summary; track card.title) {
      <app-ui-card>
        <div class="flex flex-col justify-between h-full">

          <div>
            <p class="text-sm text-gray-500">{{ card.title }}</p>
            <p class="text-2xl font-semibold text-gray-800 mt-2">
              {{ card.value }}
            </p>

            @if (card.sub) {
              <p class="text-sm text-gray-400 mt-1">{{ card.sub }}</p>
            }
          </div>

          <div class="mt-4">
            <div class="h-1 rounded-full" [ngClass]="card.color"></div>
          </div>

        </div>
      </app-ui-card>
    }
  </div>

  <!-- Two-Column Section -->
  <div class="grid grid-cols-12 gap-6">

    <!-- LEFT COLUMN (8 cols) -->
    <div class="col-span-12 lg:col-span-8 space-y-6">

      <!-- Consultations Trend -->
      <app-ui-card>
        <div>

          <div class="flex items-center justify-between mb-4">
            <div>
              <p class="text-sm text-gray-500">Consultations Trend</p>
              <p class="text-xs text-gray-400">Last 5 months</p>
            </div>
            <p class="text-sm text-gray-500">Overview</p>
          </div>

          <div class="w-full h-56">
            <!-- <svg class="w-full h-full" viewBox="0 0 100 40" preserveAspectRatio="none"> -->

              <!-- Grid Lines -->
              <!-- @for (i of gridLines; track i) {
                <line
                  x1="0" x2="100"
                  [attr.y1]="i" [attr.y2]="i"
                  stroke="#e5e7eb" stroke-width="0.3"
                ></line>
              } -->

              <!-- Trend Line -->
              <!-- <polyline
                fill="none"
                stroke="#16a34a"
                stroke-width="1"
                [attr.points]="polylinePoints"
              ></polyline> -->

              <!-- Data Points -->
              <!-- @for (p of chartPoints; track p.label; let i = $index) {
                <circle
                  r="1.3"
                  fill="#fff"
                  stroke="#16a34a"
                  stroke-width="0.5"
                  [attr.cx]="pointX(i)"
                  [attr.cy]="pointY(p.value)"
                ></circle>
              } -->

              <!-- Labels -->
              <!-- @for (p of chartPoints; track p.label; let i = $index) {
                <text
                  [attr.x]="pointX(i)"
                  y="39"
                  font-size="3"
                  fill="#94a3b8"
                  text-anchor="middle"
                >
                  {{ p.label }}
                </text>
              } -->

            <!-- </svg> -->
          </div>

        </div>
      </app-ui-card>

      <!-- Popular Crops -->
      <app-ui-card>
        <p class="text-sm text-gray-500 mb-4">Popular Crops</p>

        <div class="flex flex-col lg:flex-row items-center gap-6">

          <!-- Pie Chart -->
          <!-- <div class="w-40 h-40 flex justify-center items-center">
            <svg viewBox="0 0 32 32" class="w-40 h-40">
              @for (slice of pieChart; track slice.name) {
                <circle
                  r="16"
                  cx="16" cy="16"
                  fill="none"
                  stroke-width="32"
                  [attr.stroke]="slice.color"
                  [attr.stroke-dasharray]="slice.dash"
                  [attr.stroke-dashoffset]="slice.offset"
                ></circle>
              }
            </svg>
          </div> -->

          <!-- Legend -->
          <div class="flex-1">
            @for (c of crops; track c.name) {
              <div class="flex items-center justify-between mb-2">
                <div class="flex items-center gap-3">
                  <span
                    class="w-3 h-3 rounded-sm"
                    [style.background]="c.color"
                  ></span>
                  <div>
                    <p class="text-sm font-medium text-gray-800">{{ c.name }}</p>
                    <p class="text-xs text-gray-500">Distribution</p>
                  </div>
                </div>
                <p class="text-sm text-gray-600">{{ c.value }}%</p>
              </div>
            }
          </div>

        </div>
      </app-ui-card>

    </div>

    <!-- RIGHT COLUMN (4 cols) -->
    <div class="col-span-12 lg:col-span-4 space-y-6">

      <!-- Snapshot -->
      <app-ui-card>
        <p class="text-sm text-gray-500">Platform Snapshot</p>

        <div class="mt-4 grid grid-cols-1 gap-3">
          @for (card of summary; track card.title) {
            <div class="flex items-center justify-between bg-gray-50 p-3 rounded">
              <div>
                <p class="text-xs text-gray-500">{{ card.title }}</p>
                <p class="text-sm font-semibold text-gray-800">{{ card.value }}</p>
              </div>

              <div class="h-8 w-8 rounded-full bg-white flex items-center justify-center border text-gray-600">
                <svg class="w-4 h-4" fill="none" stroke="currentColor">
                  <path d="M12 2v20" stroke-width="2"></path>
                </svg>
              </div>

            </div>
          }
        </div>
      </app-ui-card>

      <!-- Tabs -->
      <app-ui-card>
        <div class="flex gap-3">
          <button
            (click)="setTab('consultants')"
            [ngClass]="{'bg-gray-100': activeTab() === 'consultants'}"
            class="px-3 py-1 rounded-full text-sm"
          >
            Consultants
          </button>

          <button
            (click)="setTab('consultations')"
            [ngClass]="{'bg-gray-100': activeTab() === 'consultations'}"
            class="px-3 py-1 rounded-full text-sm"
          >
            Consultations
          </button>

          <button
            (click)="setTab('ratings')"
            [ngClass]="{'bg-gray-100': activeTab() === 'ratings'}"
            class="px-3 py-1 rounded-full text-sm"
          >
            Ratings
          </button>
        </div>

        <div class="mt-4">

          @if (activeTab() === 'consultants') {
            <p class="text-sm text-gray-500">Top Consultants</p>

            <ul class="mt-2 space-y-2 text-sm">
              <li class="flex justify-between">
                <div>
                  <p class="font-medium text-gray-800">Dr. Priya Sharma</p>
                  <p class="text-xs text-gray-500">Soil Science • 8 yrs</p>
                </div>
                <p class="text-sm text-gray-700">4.9 ★</p>
              </li>

              <li class="flex justify-between">
                <div>
                  <p class="font-medium text-gray-800">Dr. Anil Verma</p>
                  <p class="text-xs text-gray-500">Crop Management • 6 yrs</p>
                </div>
                <p class="text-sm text-gray-700">4.7 ★</p>
              </li>
            </ul>
          }

          @else if (activeTab() === 'consultations') {
            <p class="text-sm text-gray-500">Consultation Stats</p>
            <p class="mt-2 text-sm text-gray-700">This month: <span class="font-semibold">289</span></p>
          }

          @else {
            <p class="text-sm text-gray-500">Ratings Overview</p>
            <p class="mt-2 text-sm text-gray-700">Avg rating: <span class="font-semibold">4.7 / 5</span></p>
          }

        </div>
      </app-ui-card>

      <!-- Pending Approvals -->
      <app-ui-card>
        <p class="text-sm text-gray-500 mb-3">Pending Consultant Approvals</p>

        <table class="w-full text-sm">
          <thead>
            <tr class="text-left text-xs text-gray-500">
              <th class="pb-2">Name</th>
              <th class="pb-2">Expertise</th>
              <th class="pb-2">Experience</th>
              <th class="pb-2">Status</th>
              <th class="pb-2">Actions</th>
            </tr>
          </thead>

          <tbody>
            @for (p of pending; track p.name) {
              <tr class="border-t">
                <td class="py-2">{{p.name}}</td>
                <td class="py-2">{{p.expertise}}</td>
                <td class="py-2">{{p.experience}}</td>

                <td class="py-2">
                  <span class="px-2 py-0.5 text-xs bg-yellow-100 text-yellow-700 rounded-full">
                    Pending
                  </span>
                </td>

                <td class="py-2 space-x-2">
                  <button class="px-2 py-1 text-sm border text-green-600 rounded">Approve</button>
                  <button class="px-2 py-1 text-sm border text-red-600 rounded">Reject</button>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </app-ui-card>

    </div>

  </div>

  <!-- Recent Consultations (Full Width) -->
  <app-ui-card>
    <p class="text-sm text-gray-500 mb-3">Recent Consultations</p>

    <div class="overflow-x-auto">
      <table class="w-full text-sm">

        <thead>
          <tr class="text-left text-xs text-gray-500">
            <th class="pb-2">Farmer</th>
            <th class="pb-2">Consultant</th>
            <th class="pb-2">Crop</th>
            <th class="pb-2">Date</th>
            <th class="pb-2">Status</th>
            <th class="pb-2">Actions</th>
          </tr>
        </thead>

        <tbody>
          @for (r of recent; track r.farmer) {
            <tr class="border-t">
              <td class="py-3">{{r.farmer}}</td>
              <td class="py-3">{{r.consultant}}</td>
              <td class="py-3">{{r.crop}}</td>
              <td class="py-3">{{r.date}}</td>

              <td class="py-3">
                @if (r.status === 'completed') {
                  <span class="px-2 py-1 text-xs bg-green-100 text-green-700 rounded-full">
                    completed
                  </span>
                }
                @else if (r.status === 'in-progress') {
                  <span class="px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full">
                    in-progress
                  </span>
                }
                @else {
                  <span class="px-2 py-1 text-xs bg-yellow-100 text-yellow-700 rounded-full">
                    pending
                  </span>
                }
              </td>

              <td class="py-3">
                <button class="px-3 py-1 border rounded text-sm">View Details</button>
              </td>

            </tr>
          }
        </tbody>

      </table>
    </div>
  </app-ui-card>

</div>
