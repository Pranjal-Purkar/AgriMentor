<div class="">
  <!-- Header -->
  
  <!-- Main Content -->
  <div class="px-5 py-6 space-y-6">
    
    <!-- Platform Overview -->
    <!-- <div>
      <h2 class="text-sm font-medium text-gray-900 mb-1">Platform Overview</h2>
      <p class="text-xs text-gray-500 mb-4">Monitor and manage the E-Consultancy platform</p>
    </div> -->

    <!-- Summary Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      @for (card of summary; track card.title) {
        <div class="bg-white rounded-lg border-l-4 p-4" [ngClass]="card.color">
          <p class="text-xs text-gray-500 mb-1">{{ card.title }}</p>
          <p class="text-2xl font-bold text-gray-900 mb-2">{{ card.value }}</p>
          @if (card.sub) {
            <p class="text-xs text-gray-600">{{ card.sub }}</p>
          }
        </div>
      }
    </div>

    <!-- Consultations Trend -->
    <div class="bg-white rounded-lg border border-gray-200 p-5">
      <div class="mb-4">
        <h3 class="text-sm font-semibold text-gray-900">Consultations Trend</h3>
        <p class="text-xs text-gray-500">Last 5 months</p>
      </div>

      <div class="w-full h-56">
        <svg class="w-full h-full" viewBox="0 0 100 50" preserveAspectRatio="none">
          <!-- Grid lines -->
          @for (i of [0,1,2,3,4,5]; track i) {
            <line x1="0" x2="100" [attr.y1]="10 + i*6.5" [attr.y2]="10 + i*6.5" stroke="#e5e7eb" stroke-width="0.15"></line>
          }

          <!-- Line -->
          <polyline 
            fill="none" 
            stroke="#16a34a" 
            stroke-width="0.5"
            [attr.points]="getConsultationLinePoints()">
          </polyline>

          <!-- Data points -->
          @for (p of chartPoints; track p.label; let idx = $index) {
            <circle 
              r="0.8" 
              fill="#fff" 
              stroke="#16a34a" 
              stroke-width="0.4"
              [attr.cx]="10 + idx * 22.5"
              [attr.cy]="45 - (p.value / 80 * 30)">
            </circle>
          }

          <!-- X-axis labels -->
          @for (p of chartPoints; track p.label; let idx = $index) {
            <text 
              [attr.x]="10 + idx * 22.5" 
              y="49" 
              font-size="2"
              fill="#6b7280" 
              text-anchor="middle">
              {{ p.label }}
            </text>
          }

          <!-- Y-axis labels -->
          @for (val of [0, 20, 40, 60, 80]; track val; let idx = $index) {
            <text 
              x="2" 
              [attr.y]="46 - idx * 7.5" 
              font-size="1.8"
              fill="#9ca3af" 
              text-anchor="start">
              {{ val }}
            </text>
          }
        </svg>
      </div>
    </div>

    <!-- Popular Crops -->
    <div class="bg-white rounded-lg border border-gray-200 p-5">
      <div class="mb-4">
        <h3 class="text-sm font-semibold text-gray-900">Popular Crops</h3>
        <p class="text-xs text-gray-500">Distribution by consultation requests</p>
      </div>

      <div class="flex flex-col md:flex-row items-center gap-8">
        <!-- Pie Chart -->
        <div class="w-48 h-48 flex-shrink-0">
          <svg viewBox="0 0 32 32" class="w-full h-full transform -rotate-90">
            @for (slice of getChartSlices(); track slice.name) {
              <circle 
                cx="16" 
                cy="16" 
                r="10" 
                [attr.stroke]="slice.color" 
                stroke-width="20" 
                fill="none"
                [attr.stroke-dasharray]="slice.dash + ' 100'" 
                [attr.stroke-dashoffset]="slice.offset">
              </circle>
            }
          </svg>
          
          <!-- Labels on chart -->
          <div class="relative -mt-48 h-48 pointer-events-none">
            @for (c of crops; track c.name; let idx = $index) {
              <div class="absolute text-xs font-medium" [style]="getCropLabelPosition(idx)">
                <span [style.color]="c.color">{{ c.name }} {{ c.value }}%</span>
              </div>
            }
          </div>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="flex gap-1 bg-white rounded-lg border border-gray-200 p-1 w-fit">
      <button 
        (click)="setTab('consultants')"
        [class.bg-gray-100]="activeTab === 'consultants'"
        [class.text-gray-900]="activeTab === 'consultants'"
        [class.text-gray-600]="activeTab !== 'consultants'"
        class="px-4 py-2 rounded-md text-sm font-medium transition-colors">
        Consultants
      </button>
      <button 
        (click)="setTab('consultations')"
        [class.bg-gray-100]="activeTab === 'consultations'"
        [class.text-gray-900]="activeTab === 'consultations'"
        [class.text-gray-600]="activeTab !== 'consultations'"
        class="px-4 py-2 rounded-md text-sm font-medium transition-colors">
        Consultations
      </button>
      <button 
        (click)="setTab('ratings')"
        [class.bg-gray-100]="activeTab === 'ratings'"
        [class.text-gray-900]="activeTab === 'ratings'"
        [class.text-gray-600]="activeTab !== 'ratings'"
        class="px-4 py-2 rounded-md text-sm font-medium transition-colors">
        Ratings
      </button>
    </div>

    <!-- Tab Content -->
    @if (activeTab === 'consultants') {
      <!-- Consultant Performance -->
      <div class="bg-white rounded-lg border border-gray-200 p-5">
        <div class="mb-4">
          <h3 class="text-sm font-semibold text-gray-900">Consultant Performance</h3>
          <p class="text-xs text-gray-500">Top-rated consultants based on farmer feedback</p>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead>
              <tr class="border-b border-gray-200">
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Consultant</th>
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Rating</th>
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Reviews</th>
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Consultations</th>
                <th class="text-right py-3 px-2 text-xs font-medium text-gray-600">Actions</th>
              </tr>
            </thead>
            <tbody>
              @for (consultant of consultantPerformance; track consultant.name) {
                <tr class="border-b border-gray-100">
                  <td class="py-3 px-2 text-gray-900">{{ consultant.name }}</td>
                  <td class="py-3 px-2">
                    <div class="flex items-center gap-1">
                      <span class="font-medium text-gray-900">{{ consultant.rating }}</span>
                      <span class="text-yellow-500">‚≠ê</span>
                    </div>
                  </td>
                  <td class="py-3 px-2 text-gray-600">{{ consultant.reviews }} reviews</td>
                  <td class="py-3 px-2 text-gray-900 font-medium">{{ consultant.consultations }}</td>
                  <td class="py-3 px-2 text-right">
                    <button class="text-xs text-gray-600 border border-gray-300 px-3 py-1.5 rounded hover:bg-gray-50">
                      View Profile
                    </button>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    }

    @if (activeTab === 'consultations') {
      <!-- Recent Consultations -->
      <div class="bg-white rounded-lg border border-gray-200 p-5">
        <div class="mb-4">
          <h3 class="text-sm font-semibold text-gray-900">Recent Consultations</h3>
          <p class="text-xs text-gray-500">Overview of all consultation activities</p>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead>
              <tr class="border-b border-gray-200">
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Farmer</th>
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Consultant</th>
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Crop</th>
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Date</th>
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Status</th>
                <th class="text-right py-3 px-2 text-xs font-medium text-gray-600">Actions</th>
              </tr>
            </thead>
            <tbody>
              @for (consultation of recentConsultations; track consultation.farmer) {
                <tr class="border-b border-gray-100">
                  <td class="py-3 px-2 text-gray-900">{{ consultation.farmer }}</td>
                  <td class="py-3 px-2 text-gray-600">{{ consultation.consultant }}</td>
                  <td class="py-3 px-2 text-gray-900">{{ consultation.crop }}</td>
                  <td class="py-3 px-2 text-gray-600">{{ consultation.date }}</td>
                  <td class="py-3 px-2">
                    <span 
                      class="px-2 py-1 rounded text-xs font-medium"
                      [ngClass]="{
                        'bg-green-50 text-green-700': consultation.status === 'completed',
                        'bg-blue-50 text-blue-700': consultation.status === 'in-progress'
                      }">
                      {{ consultation.status }}
                    </span>
                  </td>
                  <td class="py-3 px-2 text-right">
                    <button class="text-xs text-gray-600 border border-gray-300 px-3 py-1.5 rounded hover:bg-gray-50">
                      View Details
                    </button>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    }

    @if (activeTab === 'ratings') {
      <!-- Pending Consultant Approvals -->
      <div class="bg-white rounded-lg border border-gray-200 p-5">
        <div class="mb-4">
          <h3 class="text-sm font-semibold text-gray-900">Pending Consultant Approvals</h3>
          <p class="text-xs text-gray-500">Review and approve new consultant applications</p>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead>
              <tr class="border-b border-gray-200">
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Name</th>
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Expertise</th>
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Experience</th>
                <th class="text-left py-3 px-2 text-xs font-medium text-gray-600">Status</th>
                <th class="text-right py-3 px-2 text-xs font-medium text-gray-600">Actions</th>
              </tr>
            </thead>
            <tbody>
              @for (p of pendingApprovals; track p.name) {
                <tr class="border-b border-gray-100">
                  <td class="py-3 px-2 text-gray-900">{{ p.name }}</td>
                  <td class="py-3 px-2 text-gray-600">{{ p.expertise }}</td>
                  <td class="py-3 px-2 text-gray-900">{{ p.experience }}</td>
                  <td class="py-3 px-2">
                    <span class="px-2 py-1 bg-yellow-50 text-yellow-700 text-xs font-medium rounded flex items-center gap-1 w-fit">
                      <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                      </svg>
                      Pending
                    </span>
                  </td>
                  <td class="py-3 px-2 text-right">
                    <div class="flex gap-2 justify-end">
                      <button class="text-xs text-green-700 border border-green-300 bg-green-50 px-3 py-1.5 rounded hover:bg-green-100 flex items-center gap-1">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                        </svg>
                        Approve
                      </button>
                      <button class="text-xs text-red-700 border border-red-300 bg-red-50 px-3 py-1.5 rounded hover:bg-red-100 flex items-center gap-1">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                        Reject
                      </button>
                    </div>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    }

  </div>
</div>